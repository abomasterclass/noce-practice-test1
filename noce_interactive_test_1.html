<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOCE Interactive Practice Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }
        
        .instructions {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .student-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .student-info input {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        .timer-container {
            text-align: center;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .question-container {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .question-container.active {
            display: block;
        }
        
        .question-number {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .question-text {
            margin-bottom: 15px;
        }
        
        .options {
            margin-bottom: 15px;
        }
        
        .option {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background-color: #f8f9fa;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #e9ecef;
        }
        
        .option.selected {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        
        .flag-button {
            background-color: transparent;
            border: none;
            color: #6c757d;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .flag-button.flagged {
            color: #dc3545;
        }
        
        .flag-icon {
            margin-right: 5px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .nav-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .nav-button:hover {
            background-color: #2980b9;
        }
        
        .nav-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .progress-bar-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #3498db;
            border-radius: 5px;
            width: 1%;
        }
        
        .question-nav {
            display: flex;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .question-nav-button {
            width: 30px;
            height: 30px;
            margin: 3px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .question-nav-button.answered {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        
        .question-nav-button.flagged {
            border-color: #dc3545;
        }
        
        .question-nav-button.current {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .submit-section {
            text-align: center;
            margin-top: 30px;
        }
        
        .submit-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
        }
        
        .submit-button:hover {
            background-color: #218838;
        }
        
        .results-container {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .score-summary {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .score-percentage {
            font-size: 36px;
            font-weight: bold;
            color: #28a745;
        }
        
        .domain-breakdown {
            margin-bottom: 20px;
        }
        
        .domain-score {
            margin-bottom: 20px;
        }
        
        .domain-bar-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            height: 20px;
            margin-top: 5px;
        }
        
        .domain-bar {
            height: 20px;
            background-color: #3498db;
            border-radius: 5px;
        }
        
        .domain-percentage {
            font-weight: bold;
            margin-left: 5px;
        }
        
        .feedback-section {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .recommendations-section {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .start-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            display: block;
            margin: 20px auto;
        }
        
        .start-button:hover {
            background-color: #218838;
        }
        
        #start-screen {
            text-align: center;
        }
        
        #test-screen {
            display: none;
        }
        
        #submission-status {
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="start-screen">
        <h1>NOCE Interactive Practice Test</h1>
        
        <div class="instructions">
            <h2>Instructions</h2>
            <p>This practice test consists of 100 multiple-choice questions that simulate the National Opticianry Competency Examination (NOCE).</p>
            <p>You have 2 hours to complete this test. Each question has only one correct answer.</p>
            <p>Questions are mixed across all domains, similar to the actual NOCE exam.</p>
            <p>You can flag questions for review and navigate between questions freely.</p>
            <p>Your results will be shown only after you complete the entire test.</p>
        </div>
        
        <div class="student-info">
            <h2>Student Information</h2>
            <label for="student-name">Full Name:</label>
            <input type="text" id="student-name" placeholder="Enter your full name" required>
            
            <label for="student-email">Email Address:</label>
            <input type="email" id="student-email" placeholder="Enter your email address" required>
        </div>
        
        <button class="start-button" onclick="startTest()">Start Test</button>
    </div>
    
    <div id="test-screen">
        <h1>NOCE Interactive Practice Test</h1>
        
        <div class="timer-container">
            Time Remaining: <span id="timer-display">2h 00m 00s</span>
        </div>
        
        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="question-nav" id="question-nav">
            <!-- Question navigation buttons will be generated here -->
        </div>
        
        <!-- Question containers will be generated dynamically -->
        <div id="question-containers">
            <!-- Sample question container structure -->
            <div class="question-container" id="question1">
                <div class="question-number">Question 1</div>
                <div class="question-text">Which of the following terms refers to the measurement of the curvature of the front surface of a lens?</div>
                <div class="options">
                    <div class="option" onclick="selectOption(1, 'A')">A. Base curve</div>
                    <div class="option" onclick="selectOption(1, 'B')">B. Vertex power</div>
                    <div class="option" onclick="selectOption(1, 'C')">C. Diopter</div>
                    <div class="option" onclick="selectOption(1, 'D')">D. Optical center</div>
                </div>
                <button class="flag-button" onclick="toggleFlag(1)">
                    <span class="flag-icon">üè≥Ô∏è</span> Flag for review
                </button>
            </div>
        </div>
        
        <div class="navigation">
            <button class="nav-button" id="prev-button" onclick="prevQuestion()" disabled>Previous</button>
            <button class="nav-button" id="next-button" onclick="nextQuestion()">Next</button>
        </div>
        
        <div class="submit-section">
            <button class="submit-button" onclick="confirmSubmit()">Submit Test</button>
        </div>
    </div>
    
    <div class="results-container" id="results-container">
        <h1>Test Results</h1>
        
        <div class="score-summary">
            <p>Your Score:</p>
            <div class="score-percentage" id="score-percentage">0%</div>
            <p><span id="correct-answers">0</span> out of 100 questions correct</p>
        </div>
        
        <div class="feedback-section">
            <h2>Overall Assessment</h2>
            <p id="overall-feedback"></p>
        </div>
        
        <div class="domain-breakdown">
            <h2>Performance by Domain</h2>
            
            <div class="domain-score">
                <p>Domain I: Ophthalmic Optics</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain1-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain1-score">0</span> out of 25 correct <span class="domain-percentage" id="domain1-percentage">0%</span></p>
                <p id="domain1-feedback"></p>
            </div>
            
            <div class="domain-score">
                <p>Domain II: Ocular Anatomy, Physiology, Pathology, and Refraction</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain2-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain2-score">0</span> out of 10 correct <span class="domain-percentage" id="domain2-percentage">0%</span></p>
                <p id="domain2-feedback"></p>
            </div>
            
            <div class="domain-score">
                <p>Domain III: Ophthalmic Products</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain3-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain3-score">0</span> out of 20 correct <span class="domain-percentage" id="domain3-percentage">0%</span></p>
                <p id="domain3-feedback"></p>
            </div>
            
            <div class="domain-score">
                <p>Domain IV: Instrumentation</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain4-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain4-score">0</span> out of 15 correct <span class="domain-percentage" id="domain4-percentage">0%</span></p>
                <p id="domain4-feedback"></p>
            </div>
            
            <div class="domain-score">
                <p>Domain V: Dispensing Procedures</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain5-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain5-score">0</span> out of 20 correct <span class="domain-percentage" id="domain5-percentage">0%</span></p>
                <p id="domain5-feedback"></p>
            </div>
            
            <div class="domain-score">
                <p>Domain VI: Laws, Regulations, and Standards</p>
                <div class="domain-bar-container">
                    <div class="domain-bar" id="domain6-bar" style="width: 0%"></div>
                </div>
                <p><span id="domain6-score">0</span> out of 10 correct <span class="domain-percentage" id="domain6-percentage">0%</span></p>
                <p id="domain6-feedback"></p>
            </div>
        </div>
        
        <div class="recommendations-section">
            <h2>Study Recommendations</h2>
            <div id="study-recommendations"></div>
        </div>
        
        <div id="submission-status"></div>
    </div>
    
    <script>
        // Test data
        const totalQuestions = 100;
        let currentQuestion = 1;
        const answers = new Array(totalQuestions + 1).fill(null);
        const flagged = new Array(totalQuestions + 1).fill(false);
        
        // Question mapping to domains based on the mixed order
        const questionDomains = {
            // First quarter (1-25)
            1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 1, 8: 2, 9: 3, 10: 4,
            11: 5, 12: 6, 13: 1, 14: 3, 15: 4, 16: 5, 17: 1, 18: 2, 19: 3, 20: 5,
            21: 1, 22: 3, 23: 4, 24: 6, 25: 5,
            
            // Second quarter (26-50)
            26: 1, 27: 2, 28: 3, 29: 4, 30: 5, 31: 6, 32: 1, 33: 2, 34: 3, 35: 4,
            36: 5, 37: 1, 38: 3, 39: 4, 40: 5, 41: 6, 42: 1, 43: 2, 44: 3, 45: 4,
            46: 5, 47: 1, 48: 3, 49: 5, 50: 6,
            
            // Third quarter (51-75)
            51: 1, 52: 2, 53: 3, 54: 4, 55: 5, 56: 1, 57: 3, 58: 4, 59: 5, 60: 6,
            61: 1, 62: 2, 63: 3, 64: 4, 65: 5, 66: 1, 67: 3, 68: 4, 69: 5, 70: 6,
            71: 1, 72: 2, 73: 3, 74: 4, 75: 5,
            
            // Fourth quarter (76-100)
            76: 1, 77: 3, 78: 4, 79: 5, 80: 6, 81: 1, 82: 2, 83: 3, 84: 4, 85: 5,
            86: 1, 87: 3, 88: 5, 89: 6, 90: 1, 91: 3, 92: 5, 93: 1, 94: 3, 95: 5,
            96: 1, 97: 1, 98: 1, 99: 1, 100: 1
        };
        
        // Correct answers (will be populated with actual answers from the original test)
        const correctAnswers = {
            1: 'A', // Base curve
            // Additional correct answers would be added here
        };
        
        // Initialize the test
        function startTest() {
            const studentName = document.getElementById('student-name').value;
            const studentEmail = document.getElementById('student-email').value;
            
            if (!studentName || !studentEmail) {
                alert('Please enter your name and email address to start the test.');
                return;
            }
            
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('test-screen').style.display = 'block';
            
            // Generate question navigation buttons
            const questionNav = document.getElementById('question-nav');
            for (let i = 1; i <= totalQuestions; i++) {
                const button = document.createElement('div');
                button.className = 'question-nav-button';
                button.textContent = i;
                button.onclick = function() {
                    goToQuestion(i);
                };
                questionNav.appendChild(button);
            }
            
            // Show the first question
            showQuestion(1);
            updateQuestionNav();
            
            // Start the timer (2 hours = 120 minutes)
            startTimer(120);
        }
        
        // Timer functionality
        function startTimer(durationInMinutes) {
            let timer = durationInMinutes * 60;
            const timerDisplay = document.getElementById('timer-display');
            const timerInterval = setInterval(function() {
                const hours = Math.floor(timer / 3600);
                const minutes = Math.floor((timer % 3600) / 60);
                const seconds = timer % 60;
                
                timerDisplay.textContent = 
                    (hours > 0 ? hours + 'h ' : '') + 
                    (minutes < 10 ? '0' : '') + minutes + 'm ' + 
                    (seconds < 10 ? '0' : '') + seconds + 's';
                
                if (--timer < 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    submitTest();
                }
            }, 1000);
            
            // Store the interval ID to allow for pausing/resuming if needed
            window.timerIntervalId = timerInterval;
        }
        
        // Show a specific question
        function showQuestion(questionNumber) {
            // Hide all questions
            const questions = document.querySelectorAll('.question-container');
            questions.forEach(question => {
                question.classList.remove('active');
            });
            
            // Show the selected question
            const questionElement = document.getElementById('question' + questionNumber);
            if (questionElement) {
                questionElement.classList.add('active');
                currentQuestion = questionNumber;
                
                // Update navigation buttons
                document.getElementById('prev-button').disabled = (currentQuestion === 1);
                document.getElementById('next-button').disabled = (currentQuestion === totalQuestions);
                
                // Update progress bar
                const progressPercentage = (currentQuestion / totalQuestions) * 100;
                document.getElementById('progress-bar').style.width = progressPercentage + '%';
                
                // Update question navigation
                updateQuestionNav();
            }
        }
        
        // Go to a specific question
        function goToQuestion(questionNumber) {
            if (questionNumber >= 1 && questionNumber <= totalQuestions) {
                showQuestion(questionNumber);
            }
        }
        
        // Navigate to the next question
        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                showQuestion(currentQuestion + 1);
            }
        }
        
        // Navigate to the previous question
        function prevQuestion() {
            if (currentQuestion > 1) {
                showQuestion(currentQuestion - 1);
            }
        }
        
        // Select an answer option
        function selectOption(questionNumber, option) {
            // Update the answers array
            answers[questionNumber] = option;
            
            // Update the UI to show the selected option
            const questionElement = document.getElementById('question' + questionNumber);
            const options = questionElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                if (opt.textContent.startsWith(option + '.')) {
                    opt.classList.add('selected');
                }
            });
            
            // Update question navigation
            updateQuestionNav();
        }
        
        // Toggle flag for a question
        function toggleFlag(questionNumber) {
            flagged[questionNumber] = !flagged[questionNumber];
            
            // Update the UI to show the flagged status
            const flagButton = document.querySelector(`#question${questionNumber} .flag-button`);
            if (flagged[questionNumber]) {
                flagButton.classList.add('flagged');
                flagButton.innerHTML = '<span class="flag-icon">üö©</span> Flagged for review';
            } else {
                flagButton.classList.remove('flagged');
                flagButton.innerHTML = '<span class="flag-icon">üè≥Ô∏è</span> Flag for review';
            }
            
            // Update question navigation
            updateQuestionNav();
        }
        
        // Update the question navigation UI
        function updateQuestionNav() {
            const navButtons = document.querySelectorAll('.question-nav-button');
            navButtons.forEach((button, index) => {
                const questionNumber = index + 1;
                button.classList.remove('answered', 'flagged', 'current');
                
                if (answers[questionNumber]) {
                    button.classList.add('answered');
                }
                
                if (flagged[questionNumber]) {
                    button.classList.add('flagged');
                }
                
                if (questionNumber === currentQuestion) {
                    button.classList.add('current');
                }
            });
        }
        
        // Confirm test submission
        function confirmSubmit() {
            const answeredCount = answers.filter(answer => answer !== null).length - 1; // Subtract 1 because index 0 is not used
            
            if (answeredCount < totalQuestions) {
                const unansweredCount = totalQuestions - answeredCount;
                const confirmMessage = `You have ${unansweredCount} unanswered questions. Are you sure you want to submit your test?`;
                
                if (!confirm(confirmMessage)) {
                    return;
                }
            }
            
            submitTest();
        }
        
        // Calculate total score
        function calculateTotalScore() {
            let totalCorrect = 0;
            
            for (let i = 1; i <= totalQuestions; i++) {
                if (answers[i] === correctAnswers[i]) {
                    totalCorrect++;
                }
            }
            
            return {
                correct: totalCorrect,
                total: totalQuestions,
                percentage: Math.round((totalCorrect / totalQuestions) * 100)
            };
        }
        
        // Calculate domain scores
        function calculateDomainScores() {
            const domainScores = {
                1: { correct: 0, total: 25 }, // Domain I: Ophthalmic Optics
                2: { correct: 0, total: 10 }, // Domain II: Ocular Anatomy, Physiology, Pathology, and Refraction
                3: { correct: 0, total: 20 }, // Domain III: Ophthalmic Products
                4: { correct: 0, total: 15 }, // Domain IV: Instrumentation
                5: { correct: 0, total: 20 }, // Domain V: Dispensing Procedures
                6: { correct: 0, total: 10 }  // Domain VI: Laws, Regulations, and Standards
            };
            
            for (let i = 1; i <= totalQuestions; i++) {
                const domain = questionDomains[i];
                if (answers[i] === correctAnswers[i]) {
                    domainScores[domain].correct++;
                }
            }
            
            // Calculate percentages for each domain
            for (const domain in domainScores) {
                domainScores[domain].percentage = 
                    Math.round((domainScores[domain].correct / domainScores[domain].total) * 100);
            }
            
            return domainScores;
        }
        
        // Define feedback messages based on score ranges
        const overallFeedback = {
            excellent: {
                range: [90, 100],
                message: "Excellent work! You've demonstrated a strong understanding of opticianry concepts across all domains. You're well-prepared for the NOCE exam."
            },
            veryGood: {
                range: [80, 89],
                message: "Very good! You have a solid grasp of most opticianry concepts. Focus on reviewing the domains where you scored lower to further strengthen your knowledge."
            },
            good: {
                range: [70, 79],
                message: "Good job! You're on the right track with your NOCE preparation. Continue studying, particularly in the domains where you scored below 70%."
            },
            fair: {
                range: [60, 69],
                message: "Fair performance. You've demonstrated basic knowledge in some areas, but need more preparation before taking the NOCE exam. Focus on the domains where you scored lowest."
            },
            needsImprovement: {
                range: [0, 59],
                message: "This score indicates you need additional preparation before taking the NOCE exam. Don't be discouraged! Focus on thoroughly reviewing all domains, especially those where you scored lowest."
            }
        };
        
        // Domain-specific feedback
        const domainFeedback = {
            1: { // Domain I: Ophthalmic Optics
                excellent: "You have an excellent understanding of ophthalmic optics concepts.",
                good: "You have a good grasp of ophthalmic optics, but review topics like lens power calculations and prismatic effects.",
                needsWork: "Focus on strengthening your knowledge of ophthalmic optics, particularly lens designs, power calculations, and optical principles."
            },
            2: { // Domain II: Ocular Anatomy, Physiology, Pathology, and Refraction
                excellent: "You demonstrate excellent knowledge of ocular anatomy, physiology, pathology, and refraction.",
                good: "You have a good understanding of ocular anatomy and physiology, but review pathology and refraction concepts.",
                needsWork: "Concentrate on improving your knowledge of eye anatomy, common pathologies, and refractive conditions."
            },
            3: { // Domain III: Ophthalmic Products
                excellent: "You have excellent knowledge of ophthalmic products and materials.",
                good: "You have a good understanding of ophthalmic products, but review lens materials and frame components.",
                needsWork: "Focus on strengthening your knowledge of lens materials, frame types, and their applications."
            },
            4: { // Domain IV: Instrumentation
                excellent: "You demonstrate excellent knowledge of ophthalmic instrumentation.",
                good: "You have a good understanding of instrumentation, but review specific tool functions and applications.",
                needsWork: "Concentrate on improving your knowledge of measuring devices and tools used in opticianry."
            },
            5: { // Domain V: Dispensing Procedures
                excellent: "You have excellent knowledge of dispensing procedures and techniques.",
                good: "You have a good understanding of dispensing procedures, but review fitting techniques and troubleshooting.",
                needsWork: "Focus on strengthening your knowledge of frame fitting, lens positioning, and adjustment techniques."
            },
            6: { // Domain VI: Laws, Regulations, and Standards
                excellent: "You demonstrate excellent knowledge of opticianry laws, regulations, and standards.",
                good: "You have a good understanding of laws and regulations, but review specific standards and requirements.",
                needsWork: "Concentrate on improving your knowledge of legal requirements, standards, and regulations in opticianry."
            }
        };
        
        // Generate overall feedback based on score
        function generateOverallFeedback(percentage) {
            for (const level in overallFeedback) {
                const [min, max] = overallFeedback[level].range;
                if (percentage >= min && percentage <= max) {
                    return overallFeedback[level].message;
                }
            }
            return "Continue studying all domains to improve your knowledge of opticianry concepts.";
        }
        
        // Generate domain-specific feedback
        function generateDomainFeedback(domain, percentage) {
            if (percentage >= 80) {
                return domainFeedback[domain].excellent;
            } else if (percentage >= 60) {
                return domainFeedback[domain].good;
            } else {
                return domainFeedback[domain].needsWork;
            }
        }
        
        // Generate study recommendations based on domain scores
        function generateStudyRecommendations(domainScores) {
            const recommendations = [];
            const weakestDomains = [];
            
            // Identify the weakest domains (below 70%)
            for (const domain in domainScores) {
                if (domainScores[domain].percentage < 70) {
                    weakestDomains.push({
                        domain: parseInt(domain),
                        percentage: domainScores[domain].percentage
                    });
                }
            }
            
            // Sort weakest domains by score (ascending)
            weakestDomains.sort((a, b) => a.percentage - b.percentage);
            
            // Generate recommendations for the weakest domains
            if (weakestDomains.length > 0) {
                recommendations.push("Based on your performance, focus your study on these domains:");
                
                weakestDomains.forEach(item => {
                    const domainName = getDomainName(item.domain);
                    recommendations.push(`‚Ä¢ ${domainName} (${item.percentage}% correct)`);
                });
            } else {
                recommendations.push("You performed well across all domains. For further improvement, focus on:");
                recommendations.push("‚Ä¢ Reviewing complex concepts in Ophthalmic Optics");
                recommendations.push("‚Ä¢ Practicing lens power and prismatic effect calculations");
                recommendations.push("‚Ä¢ Strengthening knowledge of specific regulations and standards");
            }
            
            return recommendations;
        }
        
        // Get domain name by number
        function getDomainName(domainNumber) {
            const domainNames = {
                1: "Domain I: Ophthalmic Optics",
                2: "Domain II: Ocular Anatomy, Physiology, Pathology, and Refraction",
                3: "Domain III: Ophthalmic Products",
                4: "Domain IV: Instrumentation",
                5: "Domain V: Dispensing Procedures",
                6: "Domain VI: Laws, Regulations, and Standards"
            };
            
            return domainNames[domainNumber] || `Domain ${domainNumber}`;
        }
        
        // Update the results UI with feedback
        function updateResultsWithFeedback() {
            const totalScore = calculateTotalScore();
            const domainScores = calculateDomainScores();
            
            // Add overall feedback
            const overallFeedbackElement = document.getElementById('overall-feedback');
            overallFeedbackElement.textContent = generateOverallFeedback(totalScore.percentage);
            
            // Add domain-specific feedback
            for (let domain = 1; domain <= 6; domain++) {
                const feedbackElement = document.getElementById(`domain${domain}-feedback`);
                if (feedbackElement) {
                    feedbackElement.textContent = generateDomainFeedback(domain, domainScores[domain].percentage);
                }
            }
            
            // Add study recommendations
            const recommendationsElement = document.getElementById('study-recommendations');
            const recommendations = generateStudyRecommendations(domainScores);
            
            recommendationsElement.innerHTML = '';
            recommendations.forEach(recommendation => {
                const p = document.createElement('p');
                p.textContent = recommendation;
                recommendationsElement.appendChild(p);
            });
        }
        
        // Send results to instructor
        function sendResultsToInstructor() {
            const studentName = document.getElementById('student-name').value;
            const studentEmail = document.getElementById('student-email').value;
            const totalScore = calculateTotalScore();
            const domainScores = calculateDomainScores();
            
            // In a real implementation, this would send the data to a server
            console.log('Sending results for:', studentName, studentEmail);
            console.log('Total score:', totalScore);
            console.log('Domain scores:', domainScores);
            
            // Display confirmation to the student
            document.getElementById('submission-status').textContent = 
                'Your test results have been submitted successfully to your instructor.';
            document.getElementById('submission-status').style.color = '#28a745';
        }
        
        // Submit the test and show results
        function submitTest() {
            // Calculate scores
            const totalScore = calculateTotalScore();
            const domainScores = calculateDomainScores();
            
            // Update the results UI
            document.getElementById('score-percentage').textContent = totalScore.percentage + '%';
            document.getElementById('correct-answers').textContent = totalScore.correct;
            
            for (let domain = 1; domain <= 6; domain++) {
                document.getElementById(`domain${domain}-score`).textContent = domainScores[domain].correct;
                document.getElementById(`domain${domain}-bar`).style.width = domainScores[domain].percentage + '%';
                document.getElementById(`domain${domain}-percentage`).textContent = domainScores[domain].percentage + '%';
            }
            
            // Add feedback and recommendations
            updateResultsWithFeedback();
            
            // Hide the test and show the results
            document.getElementById('test-screen').style.display = 'none';
            document.getElementById('results-container').style.display = 'block';
            
            // Stop the timer if it's running
            if (window.timerIntervalId) {
                clearInterval(window.timerIntervalId);
            }
            
            // Send results to instructor
            sendResultsToInstructor();
        }
        
        // This function would be expanded to generate all 100 question containers
        function generateQuestionContainers() {
            // Implementation would create all question containers based on the mixed order
        }
    </script>
</body>
</html>
